/* Cartoon UI — Immo Agents */
:root{
    --bg:#fff9f3;
    --ink:#263238; --ink-2:#4b5563; --muted:#71717a;
    --primary:#5f8cff; --primary-600:#4b74e6; --accent:#ffb347; --mint:#6ad3b1; --rose:#ff7aa2;
    --surface:#fff; --card:#fff; --shadow:0 8px 24px rgba(35,35,35,.08), 0 2px 8px rgba(35,35,35,.05);
    --radius:18px;
    --space-1:8px; --space-2:12px; --space-3:16px; --space-4:20px; --space-5:28px; --space-6:40px;
  }
  html,body{height:100%}
  body{
    background:
      radial-gradient(900px 520px at 110% -20%, #ffe4c266 0%, transparent 60%),
      radial-gradient(900px 520px at -20% -10%, #c7dbff66 0%, transparent 60%),
      var(--bg);
    color:var(--ink);
    font-family:"Nunito Sans",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    line-height:1.6; -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  }
  .container{ width:min(1160px,92%); margin-inline:auto; }
  .hidden{ display:none !important; }
  
  /* BG doodles */
  .bg .dots{ position:fixed; inset:0; pointer-events:none; opacity:.25; z-index:-1;
    background:
     radial-gradient(circle at 20% 30%, #ffd2e644 0 2px, transparent 3px) 0 0/ 44px 44px,
     radial-gradient(circle at 80% 20%, #c1e9d944 0 2px, transparent 3px) 0 0/ 52px 52px;}
  .bg .rays{ position:fixed; inset:0; pointer-events:none; z-index:-1; opacity:.14;
    background:repeating-conic-gradient(from 0deg, #0000 0 1deg, #1d2b5118 1deg 8deg);
    mask: radial-gradient(closest-side, #000, #0000 72%); }
  
  /* Anim */
  @keyframes fadeIn { from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)} }
  .fade-in{ animation:fadeIn .28s ease both; }
  
  /* Cards papier */
  .card{ position:relative; border-radius:var(--radius); background:var(--card); box-shadow:var(--shadow); border:1px solid #f2f2f2; }
  .paper::after{ content:""; position:absolute; inset:-1px; border-radius:calc(var(--radius) + 4px); border:2px dashed #eaeaea; pointer-events:none; }
  
  /* Header */
  .app-header{ position:sticky; top:0; z-index:10; background:linear-gradient(180deg, #fffffff0, #ffffffe1);
    border-bottom:1px solid #eee; backdrop-filter: blur(6px); }
  .header-inner{ display:flex; align-items:center; justify-content:space-between; padding:12px 0; gap:var(--space-3); }
  .brand{ display:flex; align-items:center; gap:10px; font-weight:900; } .logo{ width:28px; height:28px; }
  
  /* Nav with underline bubble */
  .nav{ position:relative; display:flex; gap:6px; padding:6px; border-radius:999px; background:#ffffffaa; border:1px solid #f1f1f1; }
  .nav-btn{ background:transparent; border:0; color:var(--ink); padding:10px 16px; border-radius:999px; font-weight:800; position:relative; z-index:1; }
  .nav-btn:hover{ color:#111; }
  .nav-underline{ position:absolute; top:4px; left:4px; height:36px; width:80px; background:linear-gradient(90deg,#9cc2ff,#ffd28b);
    border-radius:999px; transition:transform .22s cubic-bezier(.2,.8,.2,1), width .22s; z-index:0; }
  
  /* Landing */
  .landing-inner{ padding:var(--space-6) 0 var(--space-5); }
  .hero{ display:grid; gap:var(--space-2); padding:var(--space-4); }
  .hero-logo{ width:72px; margin-inline:auto; filter: drop-shadow(0 6px 18px rgba(0,0,0,.08)); }
  .title-sticker{ font-size: clamp(26px,3.4vw,44px); line-height:1.15; font-weight:900; position:relative; display:inline-block; margin-inline:auto; }
  .title-sticker::after{ content:""; position:absolute; left:0; right:0; bottom:-8px; height:12px; z-index:-1;
    background:radial-gradient(8px 8px at 12% 50%, #ffd28b 98%, #0000 100%),
               radial-gradient(8px 8px at 32% 50%, #c1e9d9 98%, #0000 100%),
               radial-gradient(8px 8px at 52% 50%, #9cc2ff 98%, #0000 100%),
               radial-gradient(8px 8px at 72% 50%, #ffb3c8 98%, #0000 100%),
               radial-gradient(8px 8px at 92% 50%, #ffd28b 98%, #0000 100%); border-radius:8px; }
  .sub{ color:var(--ink-2); font-size:clamp(14px,2.2vw,18px); }
  .cta{ display:flex; gap:var(--space-2); justify-content:center; margin-top:var(--space-2); }
  
  /* Features */
  .features{ display:grid; gap:var(--space-3); grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); margin-top:var(--space-4); }
  .feature-card{ padding:var(--space-3); border-radius:var(--radius); }
  .feature-card h3{ font-size:18px; margin-bottom:6px; }
  .landing-footer{ text-align:center; margin-top:var(--space-4); color:var(--ink-2); }
  
  /* Sections */
  .section{ padding:var(--space-5) 0 var(--space-6); }
  .section-head{ margin:0 0 var(--space-2); }
  .section-title{ font-size:28px; }
  .section-sub{ color:var(--ink-2); margin-top:4px; display:flex; align-items:center; gap:8px; }
  .dots-inline i{ width:8px; height:8px; border-radius:50%; display:inline-block; background:#ffd28b; }
  .dots-inline i:nth-child(2){ background:#c1e9d9 } .dots-inline i:nth-child(3){ background:#9cc2ff }
  .dots-inline i:nth-child(4){ background:#ffb3c8 } .dots-inline i:nth-child(5){ background:#ffd28b }
  
  /* Grid agents */
  .grid{ display:grid; grid-template-columns: repeat(4,1fr); gap:var(--space-3); }
  @media (max-width:1024px){ .grid{ grid-template-columns: repeat(2,1fr); } }
  @media (max-width:600px){ .grid{ grid-template-columns: 1fr; } }
  .agent-card{ display:grid; grid-template-columns:64px 1fr; gap:12px; align-items:center; padding:var(--space-3); border-radius:var(--radius); min-height:134px; }
  .agent-card img{ width:64px; height:64px; border-radius:50%; background:#eef3ff; border:1px solid #e8efff; }
  .agent-card h3{ font-size:18px; margin-bottom:6px; }
  .agent-card p{ color:var(--ink-2); font-size:14px; }
  .agent-card .card-actions{ grid-column:1 / -1; display:flex; }
  .agent-card .open{ width:100%; }
  
  /* Work panel + tabs */
  .work-panel{ margin-top:var(--space-4); overflow:hidden; }
  .work-header{ display:grid; grid-template-columns: auto 1fr auto; align-items:center; gap:14px; padding:var(--space-3); border-bottom:1px dashed #ececec; }
  .work-title{ display:flex; align-items:center; gap:12px; }
  .avatar{ width:44px; height:44px; border-radius:50%; border:1px solid #e8efff; background:#eef3ff; }
  .work-tabs{ justify-self:center; background:#fff; border:2px solid #eee; padding:4px; border-radius:999px; display:flex; gap:6px; }
  .tab{ border:0; background:transparent; padding:8px 14px; border-radius:999px; font-weight:900; color:var(--ink-2); }
  .tab.active{ background:linear-gradient(90deg,#9cc2ff,#ffd28b); color:#000; }
  
  /* Bodies */
  .work-body{ padding:var(--space-3); display:grid; gap:var(--space-3); }
  .form{ display:grid; gap:var(--space-2); grid-template-columns: repeat(2,1fr); }
  @media (max-width:900px){ .form{ grid-template-columns:1fr; } }
  
  /* Inputs */
  .input, textarea, select{ width:100%; background:#fff; color:var(--ink); border:1.5px solid #e9e9ef; border-radius:14px; padding:12px 14px;
    transition:border-color .16s, box-shadow .16s; box-shadow: inset 0 -2px 0 rgba(0,0,0,.02); font-weight:600; }
  .input.search{ padding-left:44px; background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%2371717a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E"); background-repeat:no-repeat; background-position:14px 50%; }
  .input:focus, textarea:focus, select:focus{ outline:none; border-color:var(--primary-600); box-shadow:0 0 0 4px rgba(95,140,255,.18); }
  textarea{ min-height:120px; resize:vertical; }
  
  /* Résultats */
  .result-card{ border:1px solid #f1f1f1; border-radius:16px; overflow:hidden; background:linear-gradient(180deg,#fff 0%,#fffdf8 100%); box-shadow:var(--shadow); }
  .result-toolbar{ display:flex; gap:8px; padding:10px; border-bottom:1px dashed #eee; background:#fff; }
  .result{ padding:var(--space-3); line-height:1.7; }
  .result h4{ margin:12px 0 8px; }
  .meta-table{ width:100%; border-collapse:collapse; margin:10px 0 6px } .meta-table th,.meta-table td{ border:1px solid #eee; padding:8px 10px; text-align:left; }
  .badge{ display:inline-block; padding:4px 10px; border:1px dashed #e6e6e6; border-radius:999px; font-size:12px; color:var(--ink-2); background:#fff; }
  
  /* Chatbot */
  .chat-pane{ display:grid; grid-template-rows: auto 1fr auto; gap:var(--space-2); min-height:360px; }
  .chat-head{ display:flex; align-items:center; gap:12px; padding:10px 12px; background:#fff; border:1px solid #eee; border-radius:14px; }
  .character{ width:56px; height:56px; border-radius:50%; background:#f3f6ff; border:1px solid #eaf0ff; display:grid; place-items:center; overflow:hidden; }
  .character svg{ width:56px; height:56px; }
  .chat-stream{ border:1px solid #eee; background:#fff; border-radius:14px; padding:12px; display:flex; flex-direction:column; gap:10px; overflow:auto; max-height:420px; }
  .msg{ display:flex; gap:10px; align-items:flex-end; }
  .msg .bubble{ padding:10px 12px; border-radius:16px; border:1px solid #f0f0f0; background:#fff; max-width:min(640px, 78%); box-shadow:0 2px 8px rgba(0,0,0,.04); }
  .msg.bot .bubble{ background:#fff7ec; border-color:#ffe5bf; }
  .msg.user{ justify-content:flex-end; }
  .msg.user .bubble{ background:#eef3ff; border-color:#dfe7ff; }
  .msg .avatar{ width:32px; height:32px; border-radius:50%; background:#eef3ff; border:1px solid #e8efff; }
  .chat-input-row{ display:flex; gap:8px; }
  .chat-input{ flex:1; }
  
  /* Historique */
  .toolbar-row{ display:flex; gap:var(--space-2); margin-bottom:var(--space-2); }
  .list{ display:grid; gap:var(--space-2); }
  .item{ padding:var(--space-2); display:grid; grid-template-columns:1fr auto; gap:8px; align-items:center; border-radius:14px; background:#fff; border:1px solid #f1f1f1; box-shadow:var(--shadow); }
  .item .meta{ color:var(--ink-2); font-size:12px; } .item .actions{ display:flex; gap:8px; }
  
  /* Réglages */
  .settings-grid{ display:grid; gap:var(--space-3); grid-template-columns: repeat(3,1fr); align-items:start; }
  @media (max-width:1100px){ .settings-grid{ grid-template-columns:1fr 1fr; } }
  @media (max-width:720px){ .settings-grid{ grid-template-columns:1fr; } }
  .settings-grid .card{ display:grid; gap:var(--space-2); padding:var(--space-3); min-height:220px; }
  .settings-grid .card h3{ font-size:18px; font-weight:900; margin-bottom:2px; }
  .settings-grid .card label{ display:grid; gap:6px; font-weight:800; font-size:14px; }
  .settings-grid .card button{ justify-self:end; }
  
  /* Boutons */
  .btn{ appearance:none; border:none; background:transparent; color:var(--ink); font-weight:900; }
  .btn.primary{ background:linear-gradient(180deg,var(--primary),var(--primary-600)); color:#fff; padding:12px 16px; border-radius:999px; box-shadow:0 8px 20px rgba(79,114,230,.25); }
  .btn.soft{ background:#fff; border:2px solid #e9e9ef; padding:12px 16px; border-radius:999px; font-weight:900; }
  .btn.outline{ background:#fff; border:2px solid #e9e9ef; padding:10px 14px; border-radius:14px; font-weight:900; }
  .btn.tiny{ font-size:13px; padding:8px 10px; }
  .icon-btn{ background:#fff; border:2px solid #e9e9ef; color:var(--ink); width:36px; height:36px; border-radius:12px; line-height:0; }
  
  /* Ripple */
  .ripple{ position:relative; overflow:hidden; }
  .ripple .rpl{ position:absolute; border-radius:50%; transform:scale(0); background:radial-gradient(circle,rgba(255,255,255,.8),rgba(255,255,255,0) 60%); animation:rpl .55s ease-out forwards; pointer-events:none; }
  @keyframes rpl{ to{ transform:scale(12); opacity:0 } }
  
  /* Modal/Toast */
  .modal{ position:fixed; inset:0; background:rgba(0,0,0,.18); display:grid; place-items:center; padding:18px; }
  .modal-content{ width:min(520px,94%); }
  .modal-header{ display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px dashed #eee; }
  .modal-body{ padding:14px; display:grid; gap:var(--space-2); }
  .toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:18px; background:#fff; border:1px solid #eee; padding:10px 14px; border-radius:12px; box-shadow:var(--shadow); }
  
  /* Switch / Checkbox cartoon */
  .switch{ display:flex; align-items:center; gap:10px; line-height:1.3; }
  .switch input[type="checkbox"]{ appearance:auto; width:20px; height:20px; margin:0; accent-color:var(--primary-600); cursor:pointer; border-radius:6px; }
  .switch input[type="checkbox"]:focus-visible{ outline:3px solid rgba(95,140,255,.35); outline-offset:2px; }
  .switch > span{ font-weight:800; color:var(--ink); }
  
  /* Steps */
  .steps{ list-style:none; padding:var(--space-3); display:grid; gap:var(--space-2); }
  .step-dot{ display:inline-grid; place-items:center; width:24px; height:24px; border-radius:50%; background:linear-gradient(180deg,#ffd28b,#ffc266); color:#000; font-weight:900; margin-right:8px; }
  
  /* Skeleton */
  .skeleton{ border-radius:10px; background:linear-gradient(90deg,#f3f4f6 25%,#fafafa 37%,#f3f4f6 63%); background-size:400px 100px; animation:shimmer 1.2s linear infinite; height:16px; }
  @keyframes shimmer { 0%{background-position:-450px 0} 100%{background-position:450px 0} }
  
  /* Print */
  @media print{
    body{ background:#fff; }
    .app-header, .nav, .actions, .result-toolbar, .section-title, .grid, .work-header, #agentForm, .bg, .chat-pane { display:none !important; }
    .result-card, .result{ border:none; }
    #resultContent{ color:#000; }
  }
  